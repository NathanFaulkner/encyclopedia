{% extends "base.html" %}



{% block menu %}
      <div class="col-25 menu">
        <ul>
            <li><button type="button" class="collapsible">Front Matter</button>
            <div class="inner">
            {% set front = book.subdivisions.get('front') %}
            {% if front.subdivisions %}
              <ul>
                {% for section in front.subdivisions %}
                  {% if section.view_name %}
                    {% set url = url_for('book_chapter', book_name=book_name, chapter_number=section.name_for_path) %}
                  {% else %}
                    {% set url = '#' %}
                  {% endif %}
                  <li><a href={{ url }}>{{ section.display_name }}</a>
                {% endfor %}
              </ul>
              {% endif %}
            </div>
            </li>
            <li><button type="button" class="collapsible">Main Matter</button>
            <div>
            {% set main = book.subdivisions.get('main') %}
            {% if main.subdivisions %}
              <ul>
                {% for chapter in main.subdivisions %}
                  {% set outer_loop = loop %}
                  {% if chapter.view_name %}
                    {% set url = url_for('book_chapter', book_name=book_name, chapter_number=loop.index) %}
                  {% else %}
                    {% set url = '#' %}
                  {% endif %}
                  <li><a href={{ url }}>{{ chapter.display_name }}</a>
                  {% if chapter.subdivisions %}
                    <ul>
                      {% for section in chapter.subdivisions %}
                        {% if section.view_name %}
                          {% set url = url_for('book_section',
                            book_name=book_name, chapter_number=outer_loop.index,
                            section_number=loop.index) %}
                        {% else %}
                          {% set url = '#' %}
                        {% endif %}
                        <li><a href={{ url }}>{{ section.display_name }}</a></li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                </li>
                {% endfor %}
              </ul>
            {% endif %}
            </div>
            </li>
            <li><button type="button" class="collapsible">Front Matter</button>
            <div class="inner">
            {% set end = book.subdivisions.get('end') %}
            {% if end.subdivisions %}
              <ul>
                {% for section in end.subdivisions %}
                  {% if section.view_name %}
                    {% set url = url_for('book_chapter', book_name=book_name, chapter_number=section.name_for_path) %}
                  {% else %}
                    {% set url = '#' %}
                  {% endif %}
                  <li><a href={{ url }}>{{ section.display_name }}</a>
                {% endfor %}
              </ul>
              {% endif %}
            </div>
            </li>
        </ul>



          <script>
            var coll = document.getElementsByClassName("collapsible");
            var i;

            for (i = 0; i < coll.length; i++) {
              coll[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var content = this.nextElementSibling;
                if (content.style.display === "block") {
                  content.style.display = "none";
                } else {
                  content.style.display = "block"
                }
              });
            }
          </script>


      </div>



{% endblock %}
