{% extends "book_page.html" %}


{% block content %}


<h2>Exercise</h2>
{% if form %}
<p>
  {{ question.prompt_single }}
</p>
<p>
  {{ question.given_latex_display }}
</p>


{% if whether_graph %}
{% include "_tester2.html"%}
  <!-- <div style="width: 50%; float: left; border: 1px solid red;">
    <p>
      <form action="" method="post">
        {{ form.hidden_tag() }}
        <p>{{ form.submit() }}</p>
      </form>
    </p>
  </div> -->
{% else %}
  <!-- <div class="row"> -->
    <div style="width: 50%; float: left; border: 1px solid red;">
      <p>
        <form action="?form=form" method="post">
          {{ form.hidden_tag() }}
          {{ form.answer.label }}<br>
          {{ form.answer(size=32) }}<br>
          {% for error in form.answer.errors %}
          <span style="color: red;">[{{ error }}]</span>
          {% endfor %}
          <p>{{ form.submit() }}</p>
        </form>
      </p>
    </div>

    <div style="width: 50%; float: left; border: 1px solid red; display:none;">
      <p id="format_user_answer"></p>
      <script>
        document.getElementById('useranswer').addEventListener("keyup", show_answer);

        var input_field = document.getElementById('useranswer');

        function show_answer(){
        document.getElementById("format_user_answer").innerHTML = input_field.value;
        }
      </script>
    </div>
  <!-- </div> -->
{% endif %}
{% endif %}

{% if request.method == 'POST' and form.validate_on_submit() and (not whether_graph) %}
<div style="width: 100%; float: left;  border: 1px solid red; clear: left">
<table style="border: 1px solid cyan; width: 100%;">
  <tr>
    <td style="width: 50%">
      You answered:  {{ question.useranswer_latex(form.answer.data, display=False) }}
    </td>
    <td style="width: 50%">
      The correct answer is: {{ question.answer_latex }}
    </td>
  </tr>
</table>
</div>

<div style="padding:5px; border: 1px cyan;">
  {{ message|safe }}
</div>
{% else %}
{% endif %}

{% if request.method == 'POST' %}
<div class="exercise" style="float: left; width: 100%">
  <table>
    <tr>
      <td style="padding-right: 45vw"><a href="{{ url_for('question', question_name=question_name, new=True) }}">Get New Problem</a></td>
      <!-- <td style="float: right"><a>Report Bug</a></td> -->
    </tr>
  </table>
</div>
{% endif %}


  <!-- <p>
    {% if tried == True %}
    I already tried this problem!
    {% else %}
    I've never tried this problem!
    {% endif %}
  </p> -->

{% if current_user.is_authenticated %}
<div class="padding-40">
<div class="progress_container">
  <div id="progress_bar" style="width: {{ grade_info.grade*25 }}%; font-family: sans-serif">
  {{ grade_info.grade }}
  </div>
</div>
</div>
{% endif %}


<p>
  <form action="?form=bug_form" method="post">
    {{ bug_form.hidden_tag() }}
    <p>{{ bug_form.submit() }}</p>
  </form>
</p>





<!-- <p id="submit_feedback"><p>

<script>
var submitter = document.getElementById('submitter');
submitter.addEventListener('click', function(self) {
  submit_feedback.innerHTML = "Hello";
}, false);
</script> -->
{% endblock %}
